{% load static %}
{% load jinja_tags %}

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    {% block meta %}{% endblock %}

    <title>EvControl - Sistema de Control de Eventos {% block title %}{% endblock %} </title>
    <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}" />

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css' %}">
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="{% static 'plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'css/adminlte.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/settings.css' %}">
    <!-- Google Font: Source Sans Pro -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet"> -->

    <!-- CSS, propios -->
    <link rel="stylesheet" href="{% static 'css/nav_style_acc.css' %}">
    <script src="{% static 'picker/foopicker.js' %}" type="text/javascript"></script>
    <link href="{% static 'picker/foopicker.css' %}" rel="stylesheet" type="text/css" />

    <meta name="user_id" content="1">
    <meta name="vapid-key" content="{{ vapid_key }}">
</head>

<body class="hold-transition sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed" id="div_body">
    <div class="wrapper">

        <!-- Navbar -->
        <!-- <nav class="main-header navbar navbar-expand {% if autenticado == 'si' %}navbar-gray-dark{% else %}navbar-white navbar-light{% endif %} alto_cabecera"></nav> -->
        <nav class="main-header navbar navbar-expand {% if autenticado == 'si' %}navbar-white navbar-light{% else %}navbar-white navbar-light{% endif %} alto_cabecera">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <!-- <a class="nav-link" data-widget="pushmenu" href="#" role="button" {% if autenticado == 'si' %}style="color:white;" {% endif %}><i class="fas fa-bars"></i></a> -->
                    <a class="nav-link nav-barras" data-widget="pushmenu" href="#" role="button" id="btn_show_menu"><i class="fas fa-bars"></i></a>
                </li>

            </ul>

            <!--logo-->
            <ul class="navbar-nav head_img">
                <li class="nav-item">
                    <a href="{% url 'index' %}">
                    <img class="mx-auto d-block img-fluid img_cabecera" src="{% static '/img/cabecera_copetin.jpg' %}">
                    </a>
                </li>
            </ul>

            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                <!-- Notifications Dropdown Menu -->
                <li class="nav-item dropdown">
                    {% if autenticado == 'si' %}
                    <div id="div_notifications" style="display:block;">
                        <a class="nav-link" data-toggle="dropdown" href="#">
                            <i class="far fa-bell notification_icon"></i>
                            <span class="badge badge-success navbar-badge notification_normal">0</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                            <span class="dropdown-item dropdown-header">0 Avisos</span>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-calendar-day"></i> 
                                <span class="float-right text-muted text-sm"><i>Cargando...</i></span>
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <div id="div_notifications">
                        {#% include 'pages/productos_inicio_cart.html' %#}
                    </div>
                    {% endif %}
                </li>
            </ul>
        </nav>

        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="{% url 'index' %}" class="brand-link alto_cabecera back_menu_superior">
                <br>
                <img src="{% static '/img/logo_izquierda.png' %}" alt="Logo" class="brand-image img-circle elevation-3 icono_top_left">
                <span class="brand-text font-weight-light">NT-Soft</span>
            </a>

            {% if autenticado == 'no' %}
            <div class="sidebar">
                <!-- Sidebar Menu -->
                <br><br>
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column font_menu" data-widget="treeview" role="menu" data-accordion="false">
                        <li class="nav-item">
                            <a href="{% url 'index' %}" class="nav-link {% if pagina_inicio == 'si' %}back_menu_select active{% else %}back_menu{% endif %}">
                                <i class="nav-icon fas fa-home"></i>
                                <p>
                                    Inicio
                                </p>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            {% endif %}

            {% if autenticado == 'si' %}
            {% with modulos_usuario=user|lista_modulos %}

            <!-- Sidebar -->
            <div class="sidebar">
                <div class="separator_icon_user">&nbsp;</div>
                <!-- Sidebar user panel (optional) -->
                <div class="user-panel mt-3 pb-3 mb-3 d-flex icono_top_left_user">
                    <div class="image">
                        <img src="{% static 'img/user-icon.jpg' %}" class="img-circle elevation-2" alt="User Image">
                    </div>
                    <div class="info">
                        <a href="{% url 'index' %}" class="d-block info_usuario">{{user.username}} - {{user|get_punto_user}}</a>
                    </div>
                </div>

                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    {% if modulos_usuario|permisos_modulo:'1,2,3,4' == 'si' %}
                    <ul class="nav nav-pills nav-sidebar flex-column font_menu" data-widget="treeview" role="menu" data-accordion="false">
                        <!-- Add icons to the links using the .nav-icon class
                            with font-awesome or any other icon font library -->
                        <li class="nav-item has-treeview ">
                            <a href="#" class="nav-link active back_menu_select">
                                <i class="nav-icon far fa-clipboard"></i>
                                <p>
                                    Ventas
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                {% if modulos_usuario|permisos_modulo:'1' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('1'); return false;" id="module_ref_1">
                                        <i class="nav-icon fas fa-file-invoice-dollar"></i>
                                        <p>
                                            Ventas
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                
                                {% if modulos_usuario|permisos_modulo:'2' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('2'); return false;" id="module_ref_2">
                                        <i class="nav-icon fas fa-tasks"></i>
                                        <p>
                                            Productos
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                
                                {% if modulos_usuario|permisos_modulo:'3' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('3'); return false;" id="module_ref_3">
                                        <i class="nav-icon fas fa-project-diagram"></i>
                                        <p>
                                            Pendientes
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                
                                {% if modulos_usuario|permisos_modulo:'4' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('4'); return false;" id="module_ref_4">
                                        <i class="nav-icon fas fa-address-card"></i>
                                        <p>
                                            Clientes
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                            </ul>
                        </li>
                    </ul>
                    {% endif %}

                    {% if modulos_usuario|permisos_modulo:'5,6,7,8,9,10,11' == 'si' %}
                    <ul class="nav nav-pills nav-sidebar flex-column font_menu" data-widget="treeview" role="menu" data-accordion="false">
                        <li class="nav-item has-treeview ">
                            <a href="#" class="nav-link active back_menu_select">
                                <i class="nav-icon fas fa-coins"></i>
                                <p>
                                    Operaciones Caja
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                {% if modulos_usuario|permisos_modulo:'5' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('5'); return false;" id="module_ref_5">
                                        <i class="nav-icon fas fa-hand-holding-usd"></i>
                                        <p>
                                            Iniciar Caja
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'6' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('6'); return false;" id="module_ref_6">
                                        <i class="nav-icon fas fa-donate"></i>
                                        <p>
                                            Aceptar Inicio Caja
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'7' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('7'); return false;" id="module_ref_7">
                                        <i class="nav-icon fas fa-hand-holding-usd"></i>
                                        <p>
                                            Cerrar Caja
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'8' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('8'); return false;" id="module_ref_8">
                                        <i class="nav-icon fas fa-donate"></i>
                                        <p>
                                            Aceptar Cierre Caja
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'9' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('9'); return false;" id="module_ref_9">
                                        <i class="nav-icon fas fa-money-check"></i>
                                        <p>
                                            Cajas Movimientos
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'10' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('10'); return false;" id="module_ref_10">
                                        <i class="nav-icon fas fa-money-check-alt"></i>
                                        <p>
                                            Ingresos Caja
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'11' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('11'); return false;" id="module_ref_11">
                                        <i class="nav-icon fas fa-money-check"></i>
                                        <p>
                                            Egresos Caja
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                            </ul>
                        </li>
                    </ul>
                    {% endif %}
                    
                    {% if modulos_usuario|permisos_modulo:'12,13,14' == 'si' %}
                    <!--calendario-->
                    <ul class="nav nav-pills nav-sidebar flex-column font_menu" data-widget="treeview" role="menu" data-accordion="false">
                        <!-- Add icons to the links using the .nav-icon class
                            with font-awesome or any other icon font library -->
                        <li id="li_header_inventario" class="nav-item has-treeview">
                            <a id="href_header_inventario" href="#" class="nav-link active back_menu_select">
                                <i class="nav-icon fas fa-dolly-flatbed"></i>
                                <p>
                                    Inventario
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                {% if modulos_usuario|permisos_modulo:'12' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('12'); return false;" id="module_ref_12">
                                        <i class="nav-icon fas fa-sign-in-alt"></i>
                                        <p>
                                            Ingresos Almacen
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'13' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('13'); return false;" id="module_ref_13">
                                        <i class="nav-icon fas fa-sign-out-alt"></i>
                                        <p>
                                            Salidas Almacen
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'14' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('14'); return false;" id="module_ref_14">
                                        <i class="nav-icon fas fa-exchange-alt"></i>
                                        <p>
                                            Movimientos Almacen
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                            </ul>
                        </li>
                    </ul>
                    {% endif %}

                    {% if modulos_usuario|permisos_modulo:'15,16,17,18,19,20' == 'si' %}
                    <ul class="nav nav-pills nav-sidebar flex-column font_menu" data-widget="treeview" role="menu" data-accordion="false">
                        <li class="nav-item has-treeview">
                            <a href="#" class="nav-link active back_menu_select">
                                <i class="nav-icon fas fa-cogs"></i>
                                <p>
                                    Configuraciones
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                {% if modulos_usuario|permisos_modulo:'15' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('15'); return false;" id="module_ref_15">
                                        <i class="nav-icon fas fa-address-book"></i>
                                        <p>
                                            Usuarios
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'16' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('16'); return false;" id="module_ref_16">
                                        <i class="nav-icon fas fa-stream"></i>
                                        <p>
                                            Lineas
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'18' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('18'); return false;" id="module_ref_18">
                                        <i class="nav-icon fas fa-cog"></i>
                                        <p>
                                            Configuraciones
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'19' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('19'); return false;" id="module_ref_19">
                                        <i class="nav-icon fas fa-store-alt"></i>
                                        <p>
                                            Sucursales
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                                {% if modulos_usuario|permisos_modulo:'20' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('20'); return false;" id="module_ref_20">
                                        <i class="nav-icon fas fa-archway"></i>
                                        <p>
                                            Puntos
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                            </ul>
                        </li>
                    </ul>
                    {% endif %}


                    <ul class="nav nav-pills nav-sidebar flex-column font_menu" data-widget="treeview" role="menu" data-accordion="false">
                        {% if modulos_usuario|permisos_modulo:'21' == 'si' %}
                        <li class="nav-item has-treeview ">
                            <a href="#" class="nav-link active back_menu_select">
                                <i class="nav-icon fas fa-tools"></i>
                                <p>
                                    Herramientas
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                {% if modulos_usuario|permisos_modulo:'21' == 'si' %}
                                <li class="nav-item">
                                    <a href="#" class="nav-link back_menu" onclick="openModule('21'); return false;" id="module_ref_21">
                                        <i class="nav-icon fas fa-window-restore"></i>
                                        <p>
                                            Backup
                                        </p>
                                    </a>
                                </li>
                                {% endif %}
                            </ul>
                        </li>
                        {% endif %}

                        {% if modulos_usuario|permisos_modulo:'22' == 'si' %}
                        <li class="nav-item">
                            <a href="#" class="nav-link back_menu" onclick="openModule('22'); return false;" id="module_ref_22">
                                <i class="nav-icon far fa-clone"></i>
                                <p>
                                    Reportes
                                </p>
                            </a>
                        </li>
                        {% endif %}
                        
                        <li class="nav-item">
                            <a href="#" class="nav-link back_menu" onclick="openModule('1000'); return false;" id="module_ref_1000"> 
                                <i class="nav-icon fas fa-unlock-alt"></i>
                                <p>
                                    Cambiar Password
                                </p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{1|get_sub_url_empresa}}/accounts/logout/" class="nav-link back_menu">
                                <i class="nav-icon far fa-share-square"></i>
                                <p>
                                    Salir
                                </p>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
            {% endwith %}
            {% endif %}
        </aside>

        <!--main content-->
        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <div class="content">
                <div class="block_content">&nbsp;</div>
                <div class="container-fluid center" id="div_block_content">
                    {% block content %} {% endblock %}
                </div>
            </div>
        </div>

    </div>
    
    <!--modals-->
    <div class="modal fade" id="modalForm" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" id="modalPosition">
        <div class="modal-content maxwidth_dialog">
        <div class="modal-header modal_bg_primary" id="modalHeader">
            <h4 class="modal-title" id="modalTitle">Primary Modal</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body modal_bg_body_primary" id="modalBodyBG">
            <p id="modalBody">One fine body&hellip;</p>
        </div>
        <div class="modal-footer justify-content-between modal_bg_footer_primary" id="modalFooterBG">
            <button type="button" class="btn btn-secondary" id="modalButtonCancel" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="modalButtonSuccess" onclick="modalPressSuccess();">Save changes</button>
        </div>
        </div>
        <input type="hidden" id="modalFunctionSuccess" value="">
    </div>
    </div>
    
    <!-- ./wrapper -->
    <form name="form_notificaciones" method="POST" action="">
        {% csrf_token %}
        <input type="hidden" id="autenticado" value="{{autenticado}}">
        <input type="hidden" id="url_empresa" value="{{1|get_sub_url_empresa}}">
        <input type="hidden" name="url_webpush" id="url_webpush" value="{{url_webpush}}">
        <input type="hidden" id="lista_notificacion" value="{{lista_notificacion}}">
    </form>
    <div id="div_push_result" style="display: none;"></div>
    <!-- REQUIRED SCRIPTS -->

    <!-- jQuery -->
    <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
    <!-- Bootstrap 4 -->
    <script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <!-- overlayScrollbars -->
    <script src="{% static 'plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
    <!-- AdminLTE App -->
    <script src="{% static 'js/adminlte.min.js' %}"></script>
    <!--funciones propias-->
    <script src="{% static 'js/buttons.js' %}" type="text/javascript"></script>
    <!--overlib-->
    <script src="{% static 'js/overlib.js' %}" type="text/javascript"></script>
    
    <!--modulos-->
    <script src="{% static 'js/configuraciones.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/lineas.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/almacenes.js' %}" type="text/javascript"></script>
     
    <script src="{% static 'js/sucursales.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/puntos.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/cajas.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/usuarios.js' %}" type="text/javascript"></script>
    
    <script src="{% static 'js/cajas_operaciones.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/cajas_ingresos.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/cajas_egresos.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/cajas_movimientos.js' %}" type="text/javascript"></script>
    
    <script src="{% static 'js/clientes.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/productos.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/ingresos_almacen.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/salidas_almacen.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/movimientos_almacen.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/ventas.js' %}" type="text/javascript"></script>
    
    <script>
        $(document).ready(function(){
            $('.zoom').hover(function() {
                $(this).addClass('transition');
            }, function() {
                $(this).removeClass('transition');
            });
        });
        </script>
    
    {% if autenticado == 'si' %}
    <script src="{% static '/js/registerSw.js' %}"></script>
    {% endif %}
    
    {% block js_modulo %}
    {% endblock %}
    
</body>

</html>